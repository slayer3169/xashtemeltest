name: 'Opening xashds server'

on:
  # Allows you to run this workflow manually from the Actions tab or through HTTP API
  workflow_dispatch:

jobs:
  sync:
    name: 'OpenXashDS'
    runs-on: ubuntu-latest

    # Use the Bash shell regardless whether the GitHub Actions runner is ubuntu-latest, macos-latest, or windows-latest
    defaults:
      run:
        shell: bash

    steps:
    - name: Checkout sources
      uses: actions/checkout@v2
      with:
         fetch-depth: 0
         submodules: recursive
    - uses: actions/checkout@v3
    - uses: actions/setup-java@v3
      with:
       distribution: 'zulu' # See 'Supported distributions' for available options
       java-version: '8'
    # Update references
    - name: Update Etc
      run: |
        sudo dpkg --add-architecture i386
        sudo apt update
        sudo apt install libstdc++6
        sudo apt install build-essential
        sudo chmod 777 xash3d.sh

    - name: Run XashDS
      run: |
         sudo ./xash3d.sh -game cstrike +public 1 +deathmatch 1 +maxplayers 24 +sv_password 2247 +map de_dust2
